# 什么是 API 可观察性

> 原文：<https://www.moesif.com/blog/api-engineering/api-observability/What-is-API-Observability/>

API 可观察性是正确执行 APIOps 循环并确保您为 API 用户构建有价值的东西的关键要素。如果你对 APIOps 周期不熟悉，看一看本指南中的[，它提供了一个敏捷框架来快速构建面向业务和服务客户需求的 API。API 可观测性本身是传统监控的一种进化，脱胎于控制系统理论。](https://www.apiopscycles.com/)

传统的监控侧重于跟踪已知的未知情况。这意味着您已经知道要度量什么，比如每秒请求数或每秒错误数。虽然度量值可能事先不知道，但是您已经知道要测量或探测什么，比如一个计数器来跟踪桶中的请求。这使得可以报告系统的健康状况(如红色、黄色、绿色)，但对于解决工程或业务问题来说，这是一个糟糕的工具，因为这通常需要询问任意的问题。

您如何确定自己已经达到了传统监控的极限？嗯，当你正在调查一个问题，你告诉你的同事“我们可以解决这个问题，但我们没有合适的背景”。上下文是一个负载词，但它意味着你的解决方案无法回答未知的未知。相反，您需要修改您正在跟踪的指标，重新部署，然后最终查看结果以获得该上下文。

API 可观测性源于控制系统理论，通过推断状态和行为，从系统的输出尽可能多地观察系统的内部工作。有了一个复杂的分析工具来分析所有这些数据，您就能够回答任何关于您的 API 行为的任意问题，而不仅仅是一些可直接测量的预定义指标。这意味着你可以回答任何关于你的“黑匣子”如何进入这种状态的问题，甚至可以重现这种状态。

![API Metrics](img/1f5a1d7df40bdee9162936f47b9c18f4.png)

## 商业方面呢？

API 可观察性不仅仅用于诊断 API 所表现出的工程问题，它还可以帮助诊断业务问题。这些可能在本质上更抽象，但与观察你的身体服务有着相同的原则，只是扩大了范围。为了实现这一点，您不仅需要对物理基础设施进行全面观察，还需要对其他投入进行全面观察，如收入、增长和销售效率指标。这使您能够将您的“黑匣子”从仅仅一项服务扩展到整个产品或业务单位。

![API Payload Analytics](img/4d10c85a8232aa0c8a0a3141bedf11a4.png)

通过将您的 API 中发生的事情与更广泛的业务信息(如客户人口统计)联系起来，我们现在能够回答业务问题。例如，我们可以看到哪些客户请求了缺货的商品。我们不需要直接有一个计数器来测量每个顾客的缺货商品的数量。相反，像 Moesif 这样的高基数、高维度分析系统能够跟踪从 API 流出的所有信息，使我们能够动态地创建这个报告。在这种情况下，所有信息都已经可以用来创建任意报告。