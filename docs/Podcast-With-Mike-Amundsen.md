# 迈克·阿蒙森的播客

> 原文：<https://www.moesif.com/blog/podcasts/api-product-management/Podcast-With-Mike-Amundsen/>

Ep。4:迈克·阿蒙森，作家兼演说家

### Moesif 的播客网络:为 API 产品经理和其他 API 专业人士提供可操作的见解。

本周我们邀请到了著名作家兼演说家迈克·阿蒙森。他是一位多产的 API 作家，最近发布了他的新书，名为[设计和构建伟大的 Web APIs:健壮、可靠和弹性](https://www.amazon.com/Design-Build-Great-Web-APIs/dp/1680506803/)。当他不写作时，Mike 帮助公司利用 API、微服务和数字化转型中的机会。

Mike 分享了他的观点，关于为什么组织在三个层次上考虑 API，AWS 的 Werner Vogel 如何反对，API 自动化工具的未来是什么，以及许多更有见识的见解。

德瑞克·吉林，Moesif 的首席执行官是今天的主持人。

[https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/945551698&color=%23ff4f00&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&show_teaser=true](https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/945551698&color=%23ff4f00&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&show_teaser=true)

[Moesif](https://soundcloud.com/moesifhq "Moesif") · [Mike Amundsen, author and speaker](https://soundcloud.com/moesifhq/mike-amundsen "Mike Amundsen, author and speaker")

在 SoundCloud 上听这一集，在苹果或谷歌上下载，或者在 [YouTube](https://www.youtube.com/watch?v=GHE_YNjfW5k) 上观看。

[![Listen on Apple Podcasts](img/0f035c1005fd9c71c8f40242b9519f3d.png)](https://podcasts.apple.com/us/podcast/4-mike-amundsen-author-and-speaker/id1545437670?i=1000502732025) [![Listen on Google Podcasts](img/5dde28e33453b3096c5f996f6d62b5af.png)](https://podcasts.google.com/feed/aHR0cHM6Ly9mZWVkcy5zb3VuZGNsb3VkLmNvbS91c2Vycy9zb3VuZGNsb3VkOnVzZXJzOjg4ODY5ODI0NS9zb3VuZHMucnNz/episode/dGFnOnNvdW5kY2xvdWQsMjAxMDp0cmFja3MvOTQ1NTUxNjk4?sa=X&ved=0CAUQkfYCahcKEwjoy-vJ5LrvAhUAAAAAHQAAAAAQAg)

目录

*   [0:32 罗伊·菲尔丁博士解决的问题](#what-roy-fieldings-phd-solves)
*   [3:00 API 先等于 KYC](#api-first-equals-kyc)
*   [5:15 如何最好地首先构建 API](#how-best-to-build-api-first)
*   [8:16 如何构建你的 API 团队](#how-to-construct-your-api-team)
*   [12:25 你的 MVP 应该关注什么](#what-to-focus-on-in-your-mvp)
*   [14:36 用 API 减少定制构建](#reduce-custom-builds-with-apis)
*   [16:52 低码无码带来什么](#what-does-low-code-no-code-bring)
*   [19:00API 自动化准备好了吗](#is-api-automation-ready)
*   [21:20 我应该衡量哪些指标](#what-metrics-should-i-measure)
*   [25:48 可观测性与监控](#observability-versus-monitoring)
*   [29:56 为不可预知的事物设计](#designing-for-the-unpredictable)
*   [35:54 内部 API 通常缺乏弹性](#internal-apis-lack-resiliency)
*   [39:04 与沃纳·沃格尔一起反对 APIs】](#deprecating-apis-with-werner-vogel)
*   [46:09 COVID 加速 API 自动化](#covid-sped-up-api-automation)

**德里奇·吉林(Moesif):** 欢迎来到 Moesif 的 APIs over IPAs 播客网络的另一集。我是德里奇·吉林，今天的主持人，也是 Moesif 的首席执行官，API 可观测性平台。和我一起的是迈克·阿蒙森，著名的作家和演说家。他创建了 API 学院，并且是 20 年前第一批加入 API 的人之一。他目前为一些公司提供咨询，帮助他们利用 API、微服务和数字化转型机会。很高兴今天有你在这里”

迈克·阿蒙森(作者&演讲者):很高兴和你在一起，德里克。和你谈话很愉快。

## 罗伊·菲尔丁斯博士解决的问题

Roy Fielding 2000 年的博士论文以介绍 REST 而闻名。但是，它也有助于解决构建 SaaS 产品时的缩放和定制问题。

**德里奇:**牛逼。自从发现 Roy Fielding 的博士论文介绍 REST 以来，您已经做了相当长一段时间的 API 了。过去 20 年最大的变化是什么，你是如何进入 API 的？

迈克:第一个问题包含了很多内容。我应该说，实际上我并不是自己创办了 API 学院。我想确保我向马特·麦克拉蒂和罗尼·米特拉发出了呼喊。我们三个是这个小组的最初的创始人，他们对这个小组的最初设计和成功有很大的帮助。所以我想对他们大喊。学院只是我在整个 API 世界中经历的其中一步，也是我所做的一些早期工作的参考。

我一直致力于创建基于网络的系统。我之前一直在使用微软工具，使用 SOAP 服务和远程程序以及所有这些东西来做这件事。一切都很好，一切都很顺利，但是我遇到了扩展问题。我实际上是在做一个早期的软件即服务类型的实现，但是无法按照我想要的方式扩展它。所以我四处寻找，拼命寻找可以工作的东西，无意中发现了菲尔丁的论文。他写于 2000 年。他最初在 1998 年写了一篇文章并向微软展示了一些东西，但我直到 2003 年或 2004 年才接触到它。它帮助我解决了眼前的问题，这些问题最初与规模有关，最终与定制有关。所以我找到菲尔丁的方式是出于绝望——最初，我去找他，他为我解决了一些问题。然后随着我读得越来越多，你正在读一篇 175 页的博士论文(我没有博士学位，我甚至没有计算机学位，所以这对我是一个挑战)，但是随着我读得越来越多，它开始变得越来越有意义。我可以开始实验了。他谈到的越来越多的东西帮助我解决了眼前的问题。这就是我进入 Fielding 领域的真正方式——我在寻找解决方案，它帮助我解决了一些问题，然后教会我如何寻找解决其他扩展和定制问题的方法——这是我生活中的两大难题。

## API 首先等于 KYC

API first 实际上是要知道你将为你的客户——开发者——解决什么问题。在您指定任何东西之前，了解他们的问题是什么，他们将发送什么数据，他们将通过接口传递什么数据。

德里奇:很高兴听到这个消息。API 领域正在发生许多新的事情，包括业务方面和工程方面。什么叫 API 优先，API 驱动？那里有什么不同？

迈克:是的，那里也有很多东西。所以，让我们从 API 优先的概念开始。我在我刚刚完成[设计和构建伟大的 Web APIs:健壮、可靠、有弹性](https://www.amazon.com/Design-Build-Great-Web-APIs/dp/1680506803/)的书中提到了这一点。我第一次了解 API 首先是从卡斯·托马斯那里。卡斯写道，当你首先考虑界面时，你是在为人们解决问题，理解那些人是谁，他们的问题是什么，然后这将有助于你构建界面。如果我没记错的话，在那个时候，Kas 并没有像我们想象的那样谈论 web APIs，他真正想的是类库、函数、模块的接口，以及你给开发者的东西。所以他也确实在考虑开发者优先。他在想，你要帮助开发者解决问题。

现在，我经常使用的另一个 API 优先版本，我想很多人都很熟悉，来自于 API 倡导者 Kin Lane。我想 Ken 最近刚刚参加了这个播客，所以我想你已经和 Ken 谈过这个问题了。但这个概念是，在你去构建一个应用程序之前，在你去构建一个网站之前，在你去构建一个模块之前，先构建一个界面。建立接口要做什么；它在解决什么问题，你在发送什么数据，它在传递什么数据。一旦你首先有了 API，这是一个基础元素，然后你就可以添加移动应用程序、网络应用程序或桌面应用程序，而不会有太多的中断，因为它们都是在那个界面上运行的。

所以我认为这是我很快想到的两个版本，对我来说，这两个版本都与了解你的观众，了解你的目标观众，知道他们的问题是什么有关——这就是你要解决的问题。这有点像*你建造它，他们会来*。相反，理解他们的问题，为他们构建一个伟大的产品，我认为这对我来说是一个思考 API 优先的好方法。

## 如何最好地首先构建 API

如果你想建立一个 API 平台，首先要建立工具。建立人们想要的工具，确保工具可以交互，你会在这个过程中获得你的平台——不要试图先建立一个平台，因为你要在黑暗中做太多的决定。

对于那些正在向 API 优先策略迁移的组织来说，你有什么建议给他们吗，特别是如果他们是这个想法的新手？

迈克:是的，这个技巧就是关注目标受众。我和人们交谈的方式是，如果你解决了他们的问题，他们会喜欢你的产品，他们会喜欢你的 API。现在，他们是谁非常重要。如果是您自己组织内部的开发人员了解您的对象模型和业务模型，并且都拥有计算机科学学位，那么您设计 API 的方式将与您组织外部从事人力资源领域工作的人员大相径庭。他们将面临一系列非常不同的问题，理解也非常不同，因此您需要解决他们的问题。我认为这是一个非常重要的因素。

许多组织认为 API 是分层次的，他们认为它们是基础的、中间件和用户界面。很长一段时间以来，我们一直被教导这一点，但这只是到目前为止有效。只要这是真的，那就意味着你有三种不同的观众。受众是基础团队、中间件团队和 UI 团队。但是当团队必须解决所有这些事情时，他们有时经常这样做，他们必须有一个 UI 和中间件，他们负责数据，那么 API 看起来就会不同。所以了解你的观众——从你的观众开始，我认为这非常重要。

我会自告奋勇做一些我刚刚真正开始思考的事情。我最近在计算机械协会(ACM)上读到一篇文章，这篇文章是关于对 Verner Vogel 的采访，他真的被认为是亚马逊网络服务 AWS 部分的建筑师或大师。他有这个伟大的洞察力，他们从早期就开始了——他说他们的目标是构建工具，而不是平台，我认为这是一个非常有见地的评论。所以这是我跟企业公司谈的一个挑战。他们想要“我们想要一个服务平台”的概念。我们想要一个即插即用的平台，”这是一个非常合理的要求。但是当你在建造它的时候，你不是先建造一个平台，而是先建造工具，让工具成为一系列互动的一部分，然后这个平台就出现了。我想这是我将传递给任何企业的另一条建议，尤其是如果你正在内部构建:构建人们想要的工具，确保这些工具可以交互，并且你将在这个过程中获得你的平台。不要试图先搭建平台，因为你要在黑暗中做太多的决定。所以我认为构建工具，而不是平台，将是我的新口号之一。

## 如何构建你的 API 团队

在组建你的 API 团队时，遵循相反的康威方法:专注于手头的问题，组建你需要的团队来解决眼前的问题。不要想得太远。

德里奇:哦，这真是一种有趣的看待方式。我喜欢它。我的意思是，着眼于为这个 API 的单一用例构建，而不是整个平台做什么，它看起来只是一堆不同事情的混合，但它并没有真正解决我的单一用例。这也提出了一个不同的观点，对于正在组建新的 API 团队的组织来说，你如何设置它——它是一个单一的平台团队，还是一群专注于单个产品的团队？

迈克:对，那真的很好。我希望我能做得更好。我的伙伴 Ronnie Mitra，我提到过他是 API 学院的创始人之一，在这方面做得很好。他在名为[的演讲中谈了很多关于团队的事情，比如对人员平台进行编程](https://www.youtube.com/watch?v=4nvanSt3bQY)。这实际上是理解人们如何互动的概念，这涉及到 Mel Conway 关于你的软件反映你的组织和所有这些其他元素的事情。

但我认为思考这个问题的一个非常重要的方式是，你想弄清楚你当前的团队正在做什么，并首先帮助解决这些问题。不要想得太远。不要试图过多地组织或策划你的新团队将会是什么样子。其中一个非常普遍的说法是所谓的反向康威，你可以说，“嗯，我想要这种软件。所以让我继续前进，创建团队。”那是做这项工作的新团队。组队实际上是相当困难的一步。我们大多数从事 IT 行业的人，我们擅长硬件，我们擅长软件，我们不擅长湿衣服。我进入这个行业是因为我不擅长与人打交道，我认为那就是我。所以我尽量不要太热衷于尝试改造人类。我试着找出你的问题，你要做什么。

所以，当你开始这个过程时，只要把注意力集中在手头的问题上。正前方是什么。我认为任何正在经营一家企业的人，无论你是处于创业阶段还是处于中间阶段，或者你正处于某种成熟阶段，专注于手头的问题通常是最大的挑战，也是最大的问题。当你变得足够大和足够成熟时，你可以开始改变你的视野——你可以把视野移开。我不知道这对你们来说是不是这样——你们已经有一段时间了，你们可能经历过一些同样的事情。但是我觉得，专注于你的问题是什么，得到你当时需要的团队。

我从与初创公司合作中学到的一件事是，当你处于组织的不同阶段时，你会雇用不同的人，因为在这个阶段，我需要在工程方面非常优秀的人。在这个阶段，我需要一个真正擅长产品管理的人。在这个阶段，我需要真正擅长增长管理的人。就像你雇佣不同的人。所以你的团队会改变。所以不要为了适应软件而对你的人做太多的工程设计，因为那一系列的问题会一直变化。我不知道这是否接近我们最初谈论的内容，但这就是我现在的想法。

对于工程来说，这是一件非常重要的事情，你不能过度设计，尤其是在创业阶段。

**Mike:** 这同样适用于工具，而不是平台——不要太兴奋，只要得到最小可行产品(MVP)就行，这是 AWS 的另一件事，我认为这太不可思议了。回到 S3 水桶，他们真的创造了超级简单的东西，只是为了看看是否有人对它感兴趣，看看它是否可行。然后他们以此为基础。俗话说得好,“行之有效的复杂系统被证明是从行之有效的简单系统开始的。如果你建立一个复杂的系统，你永远不会让它正常工作。你总是从一个简单的系统开始。”所以我认为这贯穿了商业产品、IT 工程和一切的整个经历

## 你的 MVP 应该关注什么

把你的产品推出去，只专注于你的核心功能——尽可能地外包出去，只要有意义:让别人来做你的用户管理、计费解决方案和账户管理。

**derrick:**如果我要创办一家 API first 公司，我真正需要的那些组件是什么？我是否需要计费、网关，有很多不同的工具。

迈克:我现在和一些公司合作，他们也在为同样的事情而努力。他们从事工程已经有一段时间了。他们的产品已经过几次验证，但现在他们想升级，他们想 SaaS 升级。因此，所有这些定价和计费管理以及用户管理对他们来说是一种打击，他们意识到，“我们刚刚花了一年半的时间来构建这套工具，现在我们是否必须再花一年的时间来构建一系列其他工具，才能真正实现规模化？”所以最近给我留下深刻印象的一件事是，有很多很多平台可以在这些初始阶段帮助你:用户管理平台、定价平台、stripe 和所有这些东西，所以我开始看到越来越多的人，特别是初创公司说，“你知道吗，在开始的时候，我会让别人来处理这些事情。有人要做我的用户管理，有人要做我的账单，有人要做我的账户管理。如果它扩展到对我很重要的程度，那么我可以把它带回家。我喜欢这种态度。对我来说，这让我想起了汤姆和玛丽·波平斯，他们把精益带到了软件运动中。我听到玛丽反复说的一句话是“把决定推迟到最后负责任的时刻”。“不要提前决定。同样，这就像，不要过度工程化。所以现在我看到这些创业公司说，你知道吗，我会让别人来处理计费，我会让别人来处理用户管理，我可以在以后决定我是否要承担这项工作。但不要马上接受。所以我再次思考，专注于你的核心，专注于你的产品，只要有意义，就尽可能多地外包出去。当它不再有意义时，现在也许你有时间投资它。我看到人们就是这么做的。

## 使用 API 减少定制构建

我们越来越接近这样一个阶段，我可以把一项服务放在价值链的任何一个位置，每个人都自动工作，这就是产品管理。API 企业正在从这种定制的工程实践转变为这种以产品为中心、消费者驱动的企业。这将是未来建立业务的一种非常强大的方式。

**derrick:**对我们来说也是一样——当我们考虑我们的账单时，我们直接去找 Stripe，他也在使用 API。这只是一个巨大的传递图，想想很有趣。

迈克:这实际上是一个很好的思考方式。就是这种不断修改，不断增长的图表。

您最初的问题之一是发生了什么变化。当我第一次开始做这个的时候，很多关于 API 的东西都是工艺。一切都是定制的。我要创建这个 API，你要为 API 创建一个客户端，我们真的很高兴。随着时间一年一年地过去，我们开始远离定制版本/定制版本/定制版本。支付管理就是一个很好的例子。20 多年来，我们一直将此作为自动化服务。在 API 流行之前，ATM 工作得非常好。这是一个相互作用的系统网络，你可以把自动取款机放在任何地方，把它插入网络，它已经知道如何交流，因为所有的标准和所有的流程都已经存在，商业模式已经存在，可以提取百分比，预付现金和所有其他东西。这是一个非常成熟的网络，可能是 40 年前的网络机器，也可能是 60 年代的。因此，这是一个非常成熟的服务网络，它具有预构建的 API，可携带正确的信息。

我们刚刚到达那个阶段，我们可以说“我想插入 Stripe”，或者“我要插入其他人”或者“我要插入这个用户管理部分”我们还没有到这样一个阶段，我可以把一项服务放在价值链中间的任何地方，每个人都自动工作，这都是关于产品管理的。还有很多工程，但我认为我们越来越接近了。对我来说，这非常令人兴奋，因为这将使这个行业从定制工程实践转变为以产品为中心、以消费者为导向的企业。我认为这将是未来发展业务的一种非常非常强大的方式。

## 低码无码带来了什么

使用低代码/无代码、集成平台或类似工具，将复杂的工程部分自动化，这样您就可以专注于那些无法自动化且能带来更多价值的部分，例如设计——我们如何与人类互动。

德里奇:哦，听到这个消息真是太好了。这对 API 来说是一个巨大的冲击。对于像无代码解决方案、集成平台之类的东西，我真的很好奇，想知道它们在未来会走向何方。你认为 API 是如何改变或推动这一点的？

迈克:我又听到了很多关于低代码/无代码的说法，这是一种循环。如果你在这呆的时间够长，你就看不到我的白头发了，因为我刮了胡子，但你又开始看到类似的循环。我认为我看到 RPA 再次出现，这是流程自动化的东西，RPA + AI，有点像 RPA 3.0。所以我认为我们一次又一次地经历这些循环，对我来说这非常令人鼓舞，一点也不令人沮丧。

我想我们发现:我可以自动化更多，我可以安全地自动化另一部分。就成本管理和质量控制而言，自动化使项目成为焦点。我们在精益中进行的许多自动化处理的整个想法实际上来自于对 TQM，即全面质量管理的渴望——这是一种每次都做同样事情的想法。DevOps 的整个想法，编写所有这些脚本，是为了每次我做一个构建时，它将可靠地完全相同。因此，我们可以自动化的部分有助于我们专注于需要创造性干预的部分。

我不认为我们会在自动化设计方面做得很好，因为设计是我们人类互动的地方。无论是 API 优先、开发者优先还是消费者优先，但我们可以自动化大量的连接器，我们可以自动化大量从 A 到 b 的价值链。我认为这是我们将会看到的很多情况。

低代码/无代码正在摆脱繁琐的工程设计，所以我可以专注于消费者，所以我可以专注于输入和输出，目标，我希望这些信息出现在哪里，以及我希望如何为我的目标受众修改这些信息。对我来说，这非常令人兴奋。

## API 自动化准备好了吗

办公自动化已经在很大程度上取代了打字员和编辑。如果文字处理的工作方式是我必须在编写文档之前设置一些配置，那就是现在的 API。我们还没到那一步。

当然，即使在企业中，我们也看到许多非工程师和非技术人员在尝试 API。我认为 Postman 发布了一份报告，表明现在大多数人都不是技术人员，但他们仍然熟悉 API，并且正在使用它们。是什么阻碍了业务团队在企业中的广泛采用？

迈克:嗯，我不太确定。这是一个非常好的问题。我认为我们正处于自动化的风口浪尖，但这并不容易。想想电子表格在 80 年代和 90 年代改变办公室的方式。它从根本上改变了办公室。想想文字处理和所有其他种类的东西改变办公室的方式。我们过去有很多打字员、编辑和接电话的人。我做过一段时间的会计，我们计算数字，我们是会计，我们手工做这些事情。电子表格和文字处理等诸如此类的东西完全消除了这一点，改变了办公室。对于 API 来说，我们还没有到那种程度的改变。它还没有完全自动化。你绝对不需要再有一个 CS 学位来真正使用一个 API。但是，你仍然需要知道大量的编程知识。我不需要知道任何编程来做电子表格，做文字处理，或者类似的事情。

可以这样想，如果文字处理的工作方式是我必须在编写文档之前设置一些配置，这就是现在的 API。我必须做一些配置和设置一些其他事情，然后我可能最终开始工作。但是有了文字处理器、电子表格和幻灯片之类的东西，我什么都不用做，这些都为我做好了——魔法在幕后发生。所以我们还没到魔法阶段。所以我认为，阻碍我们前进的是在这个过程中不断降低门槛，让门槛越来越低，这样我们才能让生产率越来越高。这是一件极具挑战性的事情，但如果我想想未来几年将会发生什么。我觉得这才是真正的重点。

## 我应该衡量哪些指标

度量标准或目标可以被认为是形成了一个三角形:机器基础设施的稳定性度量标准，解决业务问题的软件处理度量标准，以及管理传统业务问题的真实业务度量标准。

这绝对是一项非常具有挑战性的任务，我们看到越来越多的产品经理发布 API，他们不仅从技术的角度来考虑这个问题，也从非技术用户的角度来考虑这个问题——他们如何尽快启动并运行他们的 API 平台或 API 产品。但这带来了一个不同的问题，如果我运送的是 MVP，那是一个 API 产品，我们应该考虑哪些指标或 KPI，以及在整个生命周期中这些指标和 KPI 是如何随时间变化的？

**迈克:**我在 [API 交通管理](https://get.oreilly.com/ind_api-traffic-management-101.html)中谈到过这个问题，这是我为奥莱利写的一本小书。你有 KPI 和 okr，这种相互平衡。okr 是英特尔提出的另一个想法，即“你的关键目标是什么，而你的关键衡量标准是什么。”因此，我认为目标是一种三角形的衡量方式:你有机器基础设施类型的指标(你如何管理，你的目标是什么，仅仅是基础设施级别的稳定性)，你有软件处理工作流类型的东西(我如何实际使用基础设施来解决眼前的业务问题，对此有一套不同的指标)，然后你有真正的业务，独立于电子产品(无论你是运输集装箱还是运输软件，你都有一个真正的业务)。每一个都有自己的目标和衡量标准。

因此，从我认为我们最了解的基础设施方面来说，我非常熟悉谷歌所说的 LETS，这是延迟错误流量和饱和度的首字母缩写，这也是谷歌在 SRE 编程和网站可靠性工程中谈论的很多内容。所以你基本上是在谈论延迟，出错需要多长时间，我产生了多少错误或者我运行了多少错误，总流量是多少。哪里流量好，哪里流量差，我系统的饱和度是多少——我是不是到了一个点，再不做点什么就要崩溃了。因此，从基础架构的角度来看，我认为这可能是一些非常好的指标，我们在这方面非常擅长。我们在每台机器、每个操作系统和每台机器中都内置了各种指标，我们可以对其进行监控。

现在，当你转向业务方面或软件方面，流程方面，我们在这方面做得相当好。这就像你的公司，这是一个很好的例子，我们可以开始说“我的网络流量是什么，我的请求是什么，网关上发生了什么”以及所有其他类似的事情。这些确实是故事的关键要素。所以现在我想弄清楚什么是我的入口点，什么是我的出口点，什么是我的停留时间，关于我的软件的事情。我的软件做得怎么样，我是否做了很多交易，我是否有很多废弃的购物车，诸如此类。这些是我认为我们大多数人都熟悉的关键指标。他们对我们构建的软件非常定制。

最后，是真正的生意。在商界，衡量标准几个世纪以来都是一样的。我们有现金流，我们有收入，我们有生产力，我们有人才。我从 A 到 b 需要多长时间。我需要多长时间把一个新功能放入系统。就功能和产品管理而言，这是我的前置时间。所以我认为每一种都有它的理由。对于我们这些在业务流程空间的中间件工作的人来说，我必须知道什么对帮助业务成功、帮助他们的底线、帮助收入是重要的。提高生产力。从商业的角度来看，我必须确保我与每个人沟通，那些非常非常重要的关键因素。

所以我觉得真的各不相同。我们了解基础设施。我们需要非常内省，我们需要在中间件方面和软件过程方面增加很多可观察性。然后，我们需要让企业更好地将这一点传达给团队的其他成员。这些就是我认为我在这个领域看到的挑战。

## 可观察性与监控

*可观察性是指能够从你获得的数据中推断出事情，而监控是指基础设施要素。可观察性确实需要引领一个面向行动的时刻，在这个时刻，机器根据信息而不是人来行动。*

**derrick:**我真的很喜欢你从不同的用例以及不同的团队的角度来看待这个问题，他们可能需要访问类似的信息，但也有所不同。谈到像 API 可见性这样的东西，我们最近看到了许多不同的术语，我们有监控、可观察性、分析，所有这些都是什么，你如何比较它们？

迈克:是的，我们在网上有一些有趣的帖子。可观察性和监控得到了这样的答案，嗯，这就像问数据和信息之间的区别。好像每个人都有这种高压手段。我真的认为，如果你仔细想想，整个可观测性的历史都来自于系统控制，控制系统。这真的来自于我们的大部分技术都来自于我们在 60 年代的太空计划。他们试图弄清楚“我如何理解系统内部发生了什么，我们如何理解这个复杂的软件和这个来回运行的动态系统内部发生了什么。”所以，对我来说，当我说可观察性时，我实际上是在说观察的能力，看的能力。这意味着我要添加许多遥测技术，软件中的遥测技术，我们刚才谈到的那种东西——有多少人点击了这个功能，有多少人关闭了购物车，有多少人初始化了一个文档，有多少人批准了一件有意义的事情。然后试图以某种一致的方式去观察。

50 或 60 年前有很多关于清单文化的讨论，即“我通过清单学习”的概念我们今天在 DevOps 做的很多事情实际上都是基于清单文化——浏览清单:你在这里是红色，你在这里是绿色。在过去的几年里，我越来越多地看到仪表板文化。所以我们不仅仅是在做事，我们也在看东西。所以我看到了这些大仪表板。当我走进他们的办公室，他们的主房间告诉他们到底发生了什么。那就是可观察性。所以可观察性使得从你得到的数据中推断事情成为可能。我认为这就是数据和信息的所在。简而言之，我的逻辑是，监控通常指的是那种基础设施元素。可观察性通常是指在我提到的第二组中正在发生的事情，即业务流程。但是，特别是对于像谷歌、脸书、微软和 AWS 这样的超大型组织，他们需要对他们的基础设施有大量的可观察性，因为这就是他们要卖的东西。因此，他们必须了解其基础架构的运行状况，以及随着时间的推移会发生什么变化。

现在，我想看到的，也是我在 AIOps 的新话题中看到的一些，人工智能 Ops 的想法，是将你在可观察水平上获得的信息转化为行动。我们进行监控的方式，我们今天进行观察的方式常常是灯灭了，一些人必须弄清楚发生了什么，启动另一台机器或解决一个问题。我更希望看到的是解决方案的自动化。所以，当事情失去平衡时，你有这种我们在平衡中工作的事情的自主性，当他们失去平衡时，系统自动旋转事情。我们今天可以做到这一点，这就是许多集群管理的全部内容——设置指标，然后让人们自动加速和减速。所以，我认为对我们来说，可观察性真的需要引导到那种面向行动的时刻，现在你实际上正在创造可以被行动的信息，如果可能的话，由机器而不是人来行动。我就是这么想的。

## 为不可预知的事物设计

设计一个伟大的 API 环境实际上就是设计一个即使人们在这个过程中犯了错误也能保持运行的系统。最终你会真正开始自然地保护自己免受恶意行为的侵害——你将拥有一个有弹性的、自力更生的系统。

德里奇:我真喜欢监控和可观察性之间的差异。对我们来说，我们一直注意到的一件事是，当你考虑交易数量时，你如何附加用户组件，客户组件，以了解谁在访问它，他们如何访问你的 API。但这带来了一个完全不同的观点，它围绕着 API ops 以及拥有一个好的 API 策略意味着什么。各种组件是什么？可观察性是其中的一部分吗？还有别的吗？

迈克:你知道，我不是很确定。我要把它翻回来，说“这对你意味着什么，API ops？”对你来说那是什么样的世界，因为我刚刚开始理解这一点，我对正在发生的事情没有很好的感觉。你们现在有一种 API 操作方法吗？如果有，那对你们来说意味着什么？

德里奇:我们仍然相信这是一个不断发展的范畴。正如我们讨论 API 产品一样，大规模交付 API 以及弃用或淘汰 API 需要哪些不同的操作方面。这就是你开始谈论 API 生命周期的地方。当涉及到 API 操作本身时，你有诸如可观察性、API 安全性、API 管理之类的东西。您可能会添加一些关于计费的其他组件，您如何实际确保人们在他们的层级内，或者不超过费率限制。围绕 API ops 有这么多不同的组件，就像当我们想到一个网站时，拥有 DevOps 或某种类型的 it 基础架构意味着什么。

迈克:这实际上很有道理。因此，至少对您和您的组织来说，它们都是围绕着运营、管理、持续和维护的。这是一种释放后的时刻。有一个完整的环境，在 API 被创建之后，在它被成功构建之后，有一整套的事情需要你去处理，一直到随着时间的推移而废弃、修改或改变的想法。

我认为这可以追溯到简单的软件知识，SDLC。我们都知道，那句格言是什么“软件 80%的努力和成本实际上花费在发布之后，而不是之前，它是在维护中。”因此，我认为 API ops 的这个想法可能是试图弄清楚这些类别是什么，我必须处理的这些事情是什么。我认为 API 比大多数已发布的软件更具挑战性，因为 API 经常会产生依赖性。有人依赖你。他们正在对这个系统做出改变或有不健康的方面，或者许多管理选择会影响你从未见过的人。所以，这是一个更复杂，更动态的系统。我认为这又回到了我们之前讨论的系统控制理论。

**德里奇:**肯定。我们已经看到了这一点，甚至在我们自己的客户群或我们交谈过的人中，如果你正在部署一个网站，有一种方法可以登录。也许你有几种不同的登录方式。当您部署一个 API 时，您实际上无法控制他们可能使用该 API 的不同集成和用例。那么，如何缩小这个范围，并确保出现一些疯狂的性能问题或会导致整个系统崩溃的问题呢？

迈克:是的，我知道。我经常使用的一句话，尤其是在这个 API 领域，“本质上，你正在构建一些东西，供你永远不会遇到的人使用，来解决你从未想过的问题。”这就是 API 的含义。人们会以各种疯狂的方式使用它。这是来自谷歌的 Hyrum Wright 的 [Hyrum 定律](https://www.hyrumslaw.com/):“无论你做出什么样的承诺，你的 API 的每一个方面都会成为某人的致命依赖。”就像，即使改变你说过可能会改变的事情也会让某人心烦意乱。因此，这一领域面临着巨大的挑战。

如果我思考更广泛的系统理论系统，Donella Meadows 那种思考，你所做的是你不阻止其他人做事情，你在其他人做事情的时候幸存下来。复杂系统即使在故障模式下也能保持运行。即使它们的一部分不能正常工作，它们也能以某种方式保持运行。因此，设计一个伟大的 API 环境实际上就是设计一个即使人们在这个过程中犯了错误也能保持运行的系统。最后，尤其是当你考虑安全问题时，你会想到信用卡管理和资金管理、资金流动的方式，你实际上开始保护自己免受恶意行为或某种类型的意外行为的侵害。所以你有这些不同的层次。因此，你真的必须在早期设计这种弹性，即使发生了不好的事情，我们仍然会没事的。你必须保护自己免受一路上可能会遇到的失败。我喜欢这本书，书名是《释放它》，作者是迈克尔·尼加德。Michael 有这种关于能力模式和稳定性模式的方法。能力模式帮助你解决问题，稳定性模式帮助你渡过难关。他有整整一个系列在忙着，有七八个。

所以我认为，当你架构、设计并开始构建自己的 API 时，你是在参与创建一个有弹性的、有点自力更生的模型的过程。这又是一个超级挑战，但我认为我们已经看到 AWS、谷歌和微软这样的人在做，这就是他们正在做的事情，他们在大多数情况下做得很好。

## 内部 API 缺乏弹性

构建强大的内部 APIs 避免相互依赖，独立构建，像对待第三方公司一样对待他们。

德里奇:是的，这实际上提出了一个有趣的观点。当我们考虑 API 以及断路器和节流的速率限制时，有时当您的 API 是公共的时更容易部署，因为它暴露在互联网上。人们可能会滥用它，不管是有意还是无意。内部 API 呢？你们的流程一样吗，有区别吗？有时候，你可以创建这些人为的依赖，或者认为你可以访问所有的东西。

**Mike:** 所以我会再次回到 AWS 的例子，因为他们谈论了很多关于贝佐斯如何告诉每个人你必须通过 API 访问，你不能再直接访问数据库的故事。这些都是试图模拟你在网络中的距离，但是供内部使用。我告诉人们的一件事，尤其是在大型企业中，是“把其他 API 当作第三方产品，把它们当作外部公司来对待。”你看不到里面，你只能看到它们的界面。我有很多组织，他们基本上通过像 OpenAPI 规范库或 AsyncAPI 库这样的库来管理接口，你真的不能越过接口看。你不知道他们的数据模型是什么，你什么都不知道。所以这可以帮到你很多。当你在内部时，你可能会陷入这种困境，没有意识到你对某人的数据模型或某人的处理模型有多么致命的依赖，如果他们改变它，它会变得多么糟糕。

因此，当人们想要让他们的组织升级到更像微服务或 API 之类的东西时，我告诉他们的第一件事就是开始在内部系统的所有其他部分之间保持距离。对待数据服务就像你不控制它们，你不拥有它们。当你设计一个服务时，不要设计数据模型，只需说“我需要下面的”，让别人让数据层为你决定(这要回到我们关于基础、中间件和 UI 的层)。无论是在关系数据库、对象数据库、文档数据库中，无论是在一个地方，还是在本地或外部托管，这都是他们的问题。这是我需要你给我的。如果你开始像对待外在事物一样对待它们，那么你很早就开始建立更多的弹性和自立。这并不容易，因为我工作过的许多美国组织的关键效率，不是他们的有效性，而是他们的关键效率，是他们几十年前就已经决定了，他们不必每天都决定。因此，当他们想要创建这种相互依赖的平台时，就会面临一系列新的问题。那就是你必须开始增加一些距离，即使这有点像一个虚假的距离。

## 沃纳·沃格尔反对 API

AWS 的负责人说“API 是永恒的，而代码不是。”因此，当放弃一个 API 时，本质上是放弃代码。

**德里奇:**这是一个很好的观点，你不能只是访问数据库，你真的需要那些真正的限制，就像它是一个外部公司一样。关于这些内部 API 的变更管理，我如何处理变更管理呢？如果我需要弃用某项服务，丢弃某些东西，我应该遵循哪些好的做法？

迈克:嗯，有一些，其中大部分都是为了让我们了解 HTML、HTTP 和 TCP/IP 之类的东西。所有这些已经存在了 30 年、40 年，TCP/IP 案例已经存在了 50 年，它们仍然在工作。但是它们已经发生了很多变化。这些变化都基于一些基本规则，这些规则是我在书中谈到的事情之一:你不能拿走任何东西(一旦它在那里，它就在那里)，你不能改变某些东西的意义(你不能说这个字段过去是指用户总数，但现在是指总页数)，每个新的变化都必须作为一个可选元素来完成。所以你不能在以后提出新的需求。这就是 HTTP、HTML 和 TCP 几十年来的工作方式。这也是我们能做的。

所以第一件事是，你不能收回。沃纳·沃格尔说“API 是永恒的，而代码不是。”我们倾向于反过来思考这个问题，至少我过去是这样。但是如果你认为 API 是永恒的，你会做得更好。但与此同时，你仍然需要做你所说的事情。总有一天你会反对的。你知道吗，我们不像以前那样经常使用 gopher 是有原因的。没人在乎。所以你必须面对它，而你面对它的方式是通过反对，而不是简单地拔掉某人的脾脏，你只是停止使用它。所以你必须有一个过程。

我在我的 YouTube 频道上做了一个关于整个过程的视频短片。本质上，你所做的是:当你不得不改变一些基本的东西，当你不得不打破一些东西(比如有一个新的规定，你在一个受管制的行业工作)，你所做的是，你叉。你真的叉它。现在我有了这个永远不会向后兼容的新东西，它必须单独管理。这是你前进的第一步。现在你在某处有了一个分支。每个人都知道，在开源项目中，当你放弃的时候，你就放弃了，当你不能让事情继续工作的时候，你就放弃了。这很有道理。在某种程度上，你将不得不反对这种做法，以某种方式摆脱这种做法，实际上你将不得不让人们从一种形式转向另一种形式，或者你将不得不让人们去其他地方，以其他方式解决他们的问题。所以你需要给人们一些引导时间，就像你在任何开源项目中做的那样。准备时间，取决于范围、范围、参与人数，准备时间可能是几年。

Salesforce 有一套流程，他们每四个月发布一次，他们在发布 42 或 43，他们支持发布 22 或 23，他们支持大约 20 个发布。因此，随着人们不断前进，他们支持这种做法。最终你会摆脱它，你所做的就是，像任何好的开源项目一样，你需要找到人来接管它。你需要放弃代码。如果你不再关心这个，把代码交给你的客户，说“你知道吗，你可以自己运行这个。”如果你不能放弃一个代码，因为涉及到知识产权之类的东西，那就有点乱了，放弃接口吧。记录接口，发布 OpenAPI 规范，给世界上的每个人，告诉他们“你知道吗，你也可以运行其中的一个。”最后，如果有人有数据存储在你这里，你必须给他们一个机会恢复他们的数据，给他们一些退出计划，一些结帐选项，一些外卖。最后把界面放上去，直接重定向到 410 Gone。HTTP 里有个东西叫 410 走了，意思是不仅不在这里，而且永远不会回来了。所以去找点别的吧。所以，我经常安排一个 410 乱世，带有一个指向开源项目的指针，或者一个指向接口的指针，或者一个指向替代服务的指针，或者类似的东西。所以肯定有一个过程，就像其他产品一样。

想想轮胎，想想车轮，想想汽车零件，我们也在做同样的事情。你可以买到 1957 年雪佛兰的汽车零件。有人把它藏在某个地方了。他们不再生产这些产品了，但是他们在哪里生产，这是我们在 it 领域必须做的事情。

德里奇:你如何确保自己没有任何问题？自从 COVID 上市以来，我们看到了平台迁移和向新网关和呼叫解决方案迁移的创纪录步伐。但是很容易出现人为失误，过早关闭服务。

迈克:是的。做到这一点无疑是一个挑战。我想 Twitter 已经经历过几次了，他们会告诉人们“我们将在年初关闭我们的服务。”我想他们大约四年前就这样做了，我曾经记录过。到了年底，他们所做的就是测试，比如关掉一个小时，看看是否有什么东西坏了。这就是你可能会遇到的情况。有时候你会碰到这种情况。我可以把我的系统设计得有弹性，但我不能把你的系统设计得有弹性。所以肯定会有问题，肯定会有像 57 雪佛兰这样的情况，我不得不自己动手制作这个零件，因为没有人再提供它了。你总是会遇到这种事情，但我认为这种交流“我们会反对这种做法”的过程然后在这些时候，人们可以试着做一些事情，他们可以分开，去做另一个版本。如果你运行网关服务，你知道你是否有流量。你知道如果你的终端上有流量，你就要弃用。所以你可以完全控制正在发生的事情，至少在入站端是这样。这样你就可以开始和别人交流了。现在在一个匿名的世界里更难了，就像一个开源项目。但是，你可以采取一些步骤。

你永远不会万无一失——傻瓜太他妈的聪明了，他们总是想出新办法来把我们搞砸。但是你可以给很多准备时间，然后你可以遵循那种负责任的折旧模式，这至少给了人们另一个选择。这就是我的建议。

## COVID 加速了 API 自动化

越来越多的机会出现，降低了创建和维护 API 的门槛。RPA 3.0、AIOps 和其他软件正在不断地自动化 API 生命周期中的许多元素。

德里奇:我喜欢这样，尤其是在反对的时候。这是我们在 Moesif 非常接近的一个难题，只要想想那个过程和自动化整个流程。作为我的最后一个问题，就他们应该阅读、学习和跟进的内容而言，你想给最新一代的产品经理一些什么建议？

迈克:哇。我可以提供这个。我可以告诉你我在读什么，我看到了什么，我认为如果你是一个好的产品经理，这会给你一些想法。老实说，我不是一个很好的产品经理。我经常在草丛中迷路。我迷失在技术细节中。但是好的产品经理通常能在我的杂草中找到一些强大的东西。

我看到很多人关注这种新的自动化方法，我认为这将对我们产生很大影响。不管你叫它 RPA 3.0，还是 AIOps 或诸如此类的东西。已经持续了很长时间了。但是，再一次，以这个最新的疫情为例，在过去的一年中，很多事情都得到了加速。这个想法是关于我如何能更加自动化，并在我和系统之间建立一个距离。所以人们会寻找这种低代码/无代码。他们会寻找将事物联系在一起的能力。他们将会寻找越来越多的机会来降低门槛。

我看到了一些非常有创意的工作，实际上是监控你的 API 流量，以便为你自动创建像 OpenAPI 文档和文档这样的东西。用它作为验证工具。你的组织有非常复杂的审批系统——你必须有一个 OpenAPI 规范，才能获准进入网关。现在，他们正在使用这些人工智能工具来实际查看您正在运行的服务是否符合您提交给注册中心的那套规范。因此，这是一个利用智能来保持一定距离并创造一些更有弹性和更稳定的系统的想法。捷克共和国有一家公司，我现在记不起名字了，它实际上是在做实时协商的客户端和服务器应用程序。这实际上表明，“哦，你用的是这个版本的 API，这是 OpenAPI 规范。我要把我的看涨期权调整为看跌期权，你要接受这些输入。”现在，这又一次拉开了自动化的距离，创造了更大的弹性。因此，它不只是生成代码，它实际上是在实时调整这些协商的元素。所以我看到越来越多这样的事情。这是另一个层面的自动化。

在可观察性和管理方面，我看到了更多的关注和更多的问题，关于什么是可观察的，什么是不可观察的，以及如何将其转化为行动，就像我们之前谈到的那样。所以我认为所有这些都是非常非常关键的。最后，我认为最重要的是，你在讨论中提到了这一点，那些试图解决自己问题的产品经理、业务主管越来越多地寻求预建软件，无代码或低代码软件，在那里我可以将事情联系在一起。我开始看到越来越多的人在 API 领域谈论试图让 API 构建和 API 发布更具视觉或直觉体验。不再是打字体验了。所以我看到更多的视觉工具，更多的连接工具，对我来说，这是另一件非常非常重要的事情。当你开始降低建立联系的门槛时，你就开始增加建立更多联系的可能性。现在我可以有更多的顾客了。现在，我可以通过网络发送更多的信息，而花费的钱和我用来开发一个定制应用程序的钱一样多。因此，我认为，如果有什么不同的话，我认为产品领域将更多地走向这种自动化，更多地走向自我修复或自我依赖，这意味着我们越来越接近那种真正的价值链自动化，在这种情况下，我可以将我的 SaaS 产品放在价值链的中间，而不会破坏它，增加价值并在交换中获得一些回报。那将会是一套奇妙的新的产品和服务，你可以自动即插即用。我很想去看看。

德里奇:然后你可以根据价格实际决定你想用哪个 API，可能是实时的。我们走着瞧。

迈克:当然。完全正确。谷歌有一个系统，他们的广告竞价系统完全是超媒体驱动的机器人，就像“我会出价这个，我会出价那个。”我给你举个例子。很多年前，当我在管理电话交换机时，有各种各样的计划来做城市间的短程服务或硬线服务。我可以根据时间和距离得到不同的价格和不同的折扣。所以我写了一个程序，说“如果有人想打电话到 100 英里以外的地方，我要使用这项服务，因为我有这个费率，因为今天是星期六，我要使用这项服务，但是星期五我要使用这项服务。”所以我们要照你说的做。最终我们都将拥有同样的界面，以同样的方式工作。我将能够开始根据价格和对我的价值建立联系。所以这次交易将会非常非常重要。我们可以开始关注质量交付、便利性和所有其他方面，在各种其他市场，这对于原料药来说也是一样的。

德里奇:嗯，很高兴听到这个消息。谢谢你今天加入我们的播客，迈克。

迈克:德瑞克，和你聊天很愉快。我们很快会再聊的。谢了。

德里奇:非常感谢。