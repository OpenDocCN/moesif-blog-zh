# 太多日志选项

> 原文：<https://www.moesif.com/blog/technical/logging/Too-Many-Logging-Options/>

### 介绍

前几天，我收到一封电子邮件，询问在记录云应用程序时应该使用哪些选项。我决定，为其他同病相怜的人宣传一下他们的反应可能会有好处。有很多伐木公司，但每一家都专注于一个特定的领域。想想分析领域。有大量不同的营销分析和商业智能公司，但每个公司都专注于特定的领域。你可能不会将 AppsFlyer、MixPanel 和 Google Analytics 相提并论，相反，你应该问你的业务需求是什么，哪家公司符合这个标准。

这篇文章并不意味着深入探究或比较，而是对许多公司和日志/异常跟踪的重点领域的介绍。

### 移动/Web 应用程序异常跟踪

有几家公司专注于异常跟踪。也就是说，当错误发生时，会为应用程序中已捕获和未捕获的异常生成一个报告。其中许多还有额外的功能，比如将错误分配给开发人员。他们的 SDK 通常捕获比典型日志消息更多的细节，比如安装的 lib 版本、环境变量等。

由于大量的移动和客户端 JS 代码被混淆和/或缩小(即编程或丑化)，如果不访问源映射，堆栈跟踪可能很难理解。它们将模糊的变量和方法名称映射到源代码中的原始名称。寻找自动化这一过程的平台。

Crashlytics 是免费的，但只支持 iOS/Android 上的移动原生应用，不支持 web。他们有一个用于公共 ide 的插件，当一个发布版本使用模糊处理构建时，可以自动上传一个源地图。Crashlytics 报告已捕获和未捕获的异常，以及一些额外的指标，如 DAU 和 MAU，并有一个最好的“仪表板”，可以每天查看应用程序的运行情况。空气制动也可以用来代替像防撞系统这样的东西。 [Airbrake](https://airbrake.io/) 也支持 web 应用，尤其适合 Ruby 环境。

在 web 应用程序方面，你有一些其他的选项，如 Sentry、Airbrake 和 [Rollbar](https://rollbar.com/) 。Sentry 开源了所有东西，但也提供了托管版本。Sentry 适用于 JVM 应用程序，包括 Servlet 和其他 JVM 语言。Sentry 支持常见的日志框架，如 Logback 和 Winston。Sentry 的搜索并不是最好的，网络应用有时会有点慢。他们的定价是基于事件摄取的，不管是否抛出错误。如果您有很多日志消息，这可能会让 Sentry 比其他选项更昂贵。另一方面，空气制动和翻车保护杆只根据你的错误率收费。因此，如果你的应用程序更多地处于维护模式，错误更少，你可能会考虑这些。

最终，它们仍然不是满足您生产调试需求的终极解决方案。这些平台中的日志搜索仍处于初级阶段，因为它们以异常和堆栈跟踪为中心，而不是原始日志记录。你不能有花哨的正则表达式或自定义查询。因此，您可能会发现自己也集成了一个日志解决方案。

### 记录

日志记录与上面讨论的异常跟踪软件非常不同。大多数日志平台比异常跟踪集成更加通用。它们可以被视为传统的 syslog 服务器，可以从各种开源日志框架(如 Logback 或 Winston)中读取数据。与异常跟踪不同，这些日志记录平台还可以记录非业务应用程序代码，如反向代理服务器日志、数据库日志等。

因为许多人记录所有的事情，所以它们可以用于其他业务需求，比如审计跟踪。

许多人都以某种方式听说过 Splunk。Splunk 是日志记录领域的现任者之一。他们最初从内部解决方案开始，现在有了价格合理的托管 SaaS 产品，但这不是他们的主要关注点。虽然他们为拥有大量数据的大公司提供了一些很好的搜索和聚合功能，但除非你是那些大公司中的一员或者有花不完的钱，否则我们不推荐 Splunk。剩下的竞争者有:Loggly、Sumo Logic、Paper Trail、Logentries 和一些你可以在 Stack Share、Quora 等网站上找到的小公司。

这一领域还有许多其他竞争对手；然而，它们仍然实现了相同的功能:从许多机器中提取日志数据，并整合到一个可搜索的数据存储中，比如 ElasticSearch。Sumo Logic 是功能最丰富但价格更高的产品之一，可以被视为“云中的 Splunk”它们提供了很好的异常检测和来自日志数据的聚合。Loggly 是比较便宜的选项之一，功能比较少。他们在正则表达式解析方面做得很好，每个 JSON 字段都可以是一个过滤器或方面。

### 自定义 ELK 堆栈

有时人们会问:“我是否应该托管我自己的[麋鹿栈](https://en.wikipedia.org/wiki/Elasticsearch)。我不想担心供应商锁定？”除非你是有定制需求或者使用率非常高的比较大的公司，否则我绝对不建议你之前建立自己的 ELK 栈。尤其是如果你没有很大的 DevOps 背景。你的路线图上可能有足够多的产品特性、成长秘诀、客户等等。日志记录是您必须投入大量精力才能正确扩展的事情，您可能每秒会投入数千或数百万个事件。您不希望担心优化 JVM 参数和内存消耗以使 LogStash 运行良好，或者确保 ElasticSearch 正确备份和故障安全，以便在一些 elastic search 节点关闭时不会丢失所有数据。较大的公司有完整的团队为日志记录创建数据管道(或者在我们的例子中是一家初创公司；))当你准备好了，你可以随时设置你自己的 ELK 堆栈，但现在更容易支付 100 美元/月左右，然后支付工资，不仅是设置，还有支持。

### 供应商锁定:

在选择数据库技术时，需要付出很大努力来避免供应商锁定。您的应用程序代码变得依赖于特定的数据库客户机驱动程序、查询模式等。在不同技术之间导出数据本身可能需要一些工作。另一方面，除了审计跟踪要求之外，日志数据并不会真正保留很长时间。日志 SaaS 平台通常插入标准框架，如 Logback。因此，更改提供者可能需要几分钟时间，并且只需要包含一个新的库和一些针对密钥/秘密的应用程序配置开关。因此，我认为供应商锁定的风险较小。

#### 谢谢

我们感谢我们的精选测试版客户，他们一直在试用 Moesif，为我们提供了宝贵的反馈，使调试变得更加容易。

您是否花费大量时间调试客户问题？
Moesif 使 RESTful APIs 和集成应用的调试更加容易

[了解更多信息](https://www.moesif.com?utm_source=blog)