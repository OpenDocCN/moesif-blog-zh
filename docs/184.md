# 为您的 API 使用 OpenAPI (Swagger)规范的好处是什么？

> 原文：<https://www.moesif.com/blog/technical/api-design/Benefits-of-using-the-OpenAPI-Swagger-specification-for-your-API/>

随着软件产品越来越仅仅是一堆微服务和第三方 API 的融合，让它们的结构井然有序变得更加重要。

GraphQL 从一开始就已经做到了这一点，它提供了一个完整的规范来描述该类型的 API 应该如何工作。在 RESTful API 领域，事情变得更加狂野。然而，即使不是所有的后端开发人员都知道，REST APIs 也有各种各样的规范！

其中最著名的是 OpenAPI 规范或简称 OAS。

## 输入 OpenAPI

在 2017 年发布 3.0 版本之前， [OpenAPI 规范](https://www.openapis.org/)被称为 Swagger，并被重命名为 OpenAPI。这是一种描述 RESTful API 的与语言无关的方式，可以用来生成代码存根和文档。

它的想法是用一个 YAML 文档指定一个 REST API。这个文档可以用来为 API 端点生成文档和方法。虽然 API 通常用于分离软件，但 OpenAPI 规范也允许我们将 API 的公共接口与实现细节分离。

业务和设计团队可以定义他们需要的特性，工程团队可以创建一个 OpenAPI YAML 文档，用技术术语定义所有这些特性。

然后前端和后端团队可以使用这个文档作为他们实现的基础。双方都可以选择他们认为合适的技术。

OpenAPI 生态系统甚至提供了创建模拟 API 的工具，因此前端开发人员有了更实际的工作。

## 为什么要用？

在前端和后端之间添加一个 OpenAPI 规范是有价值的，原因有很多。

### 设计第一

在开始实现之前，我们可以为每个端点定义带有类型和示例的整个 API。使用生成模拟 API 的工具，我们可以验证一切看起来都如我们所愿。我们可以通过简单地迭代规范文档来改进我们的 API 设计。

### 代码生成器

OpenAPI 是 REST 规范，其代码生成器支持大多数语言。它以我们选择的语言生成服务器存根，我们必须将它与我们的后端服务和数据库连接起来。

### 工具作业

Swagger 规范被捐赠给了 OpenAPI 基金会，并被重新命名为 OpenAPI 规范。然而，在 Swagger 品牌下有一个巨大的工具生态系统，可以用来加速 API 开发过程。

它们可用于自动生成:

*   证明文件
*   试验
*   模拟服务器

### 庞大的用户群

OpenAPI 被许多大公司使用和支持，可以被视为他们多年来构建数千个 API 的浓缩知识。如果我们开始构建我们的第一个 API，这一知识本身就是无价的，但是如果有什么不太好的地方，知道有很多人在那里提供帮助也是很好的。

### 稳定实施

正如已经提到的，OpenAPI 规范在 2017 年之前被称为 Swagger 规范，所以它不是该规范的第一个版本也就不足为奇了。从 Swagger 到 OpenAPI 的更名发生在 3.0 版本。

该规范现在并不经常改变，在这一点上可以认为是成熟的。

## 为什么我们不应该使用它？

OpenAPI 规范并不是能够解决构建 API 时出现的所有问题的灵丹妙药。

### 没有 RESTful API

如果我们使用 [GraphQL](https://graphql.org/) ，就不需要 OpenAPI 了。然而，有时这并不明显。有时我们得到构建一个 API 的任务，认为它是 RESTful 的，但是当了解到需要的特性时，我们最好使用非 RESTful 的。

例如，如果我们构建一个基于事件的系统，类似于 [gRPC](https://grpc.io/) 或 [AsyncAPI](https://www.asyncapi.com/) 的东西可能更适合它。

### 增加了复杂性

与我们添加到项目中的所有工具一样，存在增加复杂性的风险，但不会带来任何好处。过去，许多人被 SOAP 烧伤，即使 OpenAPI 规范并不庞大，但如果使用不当，也会导致问题。

我们需要为我们选择的框架找到一些集成，或者我们需要切换到支持 OpenAPI 规范的框架。然后我们可能会发现另一个框架的性能不够好，或者不再被维护。

此外，我们编写的每一行代码都是潜在的错误来源，即使它是 YAML。

构建 API 的开发人员也必须掌握使用 OpenAPI 及其工具的技能。

### 替代缺失的技能

当我们已经有了熟悉他们行业的高级 API 开发人员时，OpenAPI 可能是多余的，但它可以作为经验不足的开发人员的指南。问题是，我们需要培训这些人，而不仅仅是希望 OpenAPI 将我们从糟糕的 API 设计选择中拯救出来。

它应该是帮助人们的工具，而不是教育他们的替代品。

## 工具

有大量的工具可以让 OpenAPI 的工作变得更加简单。转换器、数据验证器、文档、编辑器、模拟服务器以及测试和 SDK 的生成器。

大部分可以在这里找到:https://openapi.tools/.

## 替代品？

当然，OpenAPI 规范有许多替代方案，虽然它们的采用率较低，但可能是它们为我们的开发人员提供了正确的选择，并且更容易理解和使用。

*   RAML-RESTful API 建模语言 RAML 比 OpenAPI 更轻量级，但仍然基于 YAML。
*   API 蓝图。用于 web APIs 的强大的高级 API 描述语言。 API Blueprint 使用自己的(非 YAML)语法。

## 结论

OpenAPI 是将几十年的 API 构建技巧融入规范的众多尝试之一。看起来甚至是最有想法和财力的人。

OpenAPI 倡议是 Linux 基金会的一部分，这使得它更值得信赖，至少看起来不会很快消失。

它不是灵丹妙药，可能也不适合所有人，但是如果使用得当，增加的复杂性可以在以后的文档编写和测试创建中节省相当多的时间。