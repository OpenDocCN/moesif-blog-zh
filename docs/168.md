# 构建企业 API 分析平台的成本

> 原文:[https://www . moes if . com/blog/financial/procurement/The-Cost-of-Building-an-API-Analytics-Platform/](https://www.moesif.com/blog/financial/procurement/The-Cost-of-Building-an-API-Analytics-Platform/)

相对于从第三方供应商购买，决定是否雇佣和构建 API 分析平台可能是一项艰巨的任务。你不仅需要调查投资回报率，你还必须驾驭政治，可能会遇到*不是这里发明的*综合症，以及其他问题。从长远来看，通过购买像 Moesif 这样的现成解决方案，您的产品和工程团队将能够专注于他们最擅长的事情:构建客户喜爱的产品。

## 构建 API 分析平台的初始成本

构建 API 分析系统的成本取决于数据量和功能复杂性，但可以分为三个方面:

*   数据处理基础设施
*   可视化、报告和集成
*   安全性和合规性特性

### 数据处理基础设施

设计和构建一个能够进行数千万或数亿次 API 调用的系统并不容易。它需要投资于高可用性数据收集、数据管道和聚合以及安全存储数据的良好架构。需要注意性能，以确保您的分析系统不会降低 API 的速度或导致停机，从而导致收入损失。

从我们所见，API 分析系统最常见的需求是每月处理 2500 万个 API 调用，每月 1 亿个 API 调用，每月超过 10 亿个 API 调用。随着分析系统扩展到更高的容量，它的成本很容易超过 100 万美元。

| 月成交量 | 需要团队 | 构建时间 | 基础设施的建造成本 |
| --- | --- | --- | --- |
| 2500 万次 API 调用 | 6 个人 | 13 周 | $154,296 |
| 1 亿次 API 调用 | 13 个人 | 26 周 | $668,616 |
| 10 亿次 API 调用 | 19 人 | 33 周 | $1,240,302 |

每个团队成员的成本基于一名[数据工程师](https://www.glassdoor.com/Salaries/data-engineer-salary-SRCH_KO0,13.htm)的全国平均工资，2020 年 2 月在 Glassdoor 上为 102，864 美元/年。

### 可视化、报告和集成

除了数据量，初始成本还取决于谁在利用报告，以及数据是否真正可操作。是否只有少数工程师会使用分析系统，并乐于通过原始 SQL 进行查询，或者您是否期待其他用户？许多寻求实现 API 分析系统的工程领导者希望整个公司的决策者能够访问数据，包括产品、营销、支持和客户成功。除非分析系统具备即使非技术用户也能实现自助访问所需的基础架构，否则数据团队仍将成为瓶颈，减缓决策和实验速度，从而导致市场份额流失。这可以包括可视化工具，使团队能够创建和试验他们自己的仪表板和指标，还可以包括与 Salesforce、HubSpot 和 Segment 等工具的连接器，以使数据具有可操作性。

在选择基于数据仓库中已处理数据的商业智能工具时，有多种选择。

| 用户数量 | 可视化人工周 | 需要连接器 | 连接器人工周 | 构建可视化和集成的成本 |
| --- | --- | --- | --- | --- |
| 10 名团队成员 | 5 周 | Two | 6 周 | $21,758 |
| 50 名团队成员 | 5 周 | seven | 14 周 | $51,431 |
| 150 名团队成员 | 5 周 | Twenty-one | 42 周 | $134,513 |

像 Tableau 或 Looker 这样的 BI 可视化工具估计需要 5 个人周来实施您的数据基础架构并设置报告。Salesforce 或 Hubspot 等工具的每个额外连接器估计需要 3 个人周。我们通常看到每个 7 人的团队都需要一个新的连接器作为他们选择的工具。

如果分析系统需要实时警报和异常检测，这些也应该是考虑因素。如果产品所有者需要 24 小时才能意识到客户流有问题，那么收入可能会损失。

### 安全性和合规性

如果您的企业有安全性和法规遵从性要求，也应该考虑这些成本。这可能包括法律要求，如安全审计日志和数据违规检测，以及符合监管要求的机制，如通用数据保护法规(GDPR)和加州消费者隐私法案(CCPA)，以及擦除个人身份信息(如信用卡号)的方法。这意味着您可能需要让法律和安全团队来审查您的分析系统，以确保您不会给业务带来太多风险。

您的公司可能还对内部系统有其他要求，如企业单点登录和密码泄露检测，以帮助帐户管理。由于您的分析系统包含大量客户数据，因此良好的做法包括利用基于角色的访问控制和自定义权限来防止数据泄露，以及利用适当的系统来监控是否发生违规。许多可视化工具都有 RBAC，但是任何直接访问数据基础设施的人都可以很容易地绕过它。

以下是安全相关功能的典型成本:

| 特征 | 人-周 | 安全性和合规性的构建成本 |
| --- | --- | --- |
| 安全审计日志 | 3 周 | $5,934 |
| 数据清理/GDPR 和 CCPA 支持 | 4 周 | $7,912 |
| 数据泄露检测 | 4 周 | $7,912 |

## 维护 API 分析解决方案的持续成本

一旦系统投入使用，系统处理万亿字节数据的持续成本仍然很高，通常来自三个方面:

*   计算和存储成本
*   可视化工具的许可费用
*   持续维护和修复

与流行的假设相反，由于工程师转移到需要加速时间的其他项目，维护成本会随着时间的推移而显著增加。许多公司实施 API 分析系统来推动 API 业务的采用和增长，但这种增长可能会直接导致额外的计算成本。如果技术债务增加，系统将很快需要后续投资，通过增加计算资源和在数据处理中利用更新的方法来处理额外的负载。

### 计算成本

根据我们自己的测量，1 亿次 API 调用平均需要 1tb 的存储空间。如果需要一年的数据历史，每月 1 亿次 API 调用将需要每年 12tb。

截至 2020 年 2 月，对于 2TB 硬盘、4 核虚拟机，AWS 红移按需定价为每小时 0.85 美元，对于 16TB 硬盘、36 核虚拟机，为每小时 6.80 美元。

以下成本假设数据保留一年，然后被删除。

| 月成交量 | 需要存储 | 计算和存储的年度成本 |
| --- | --- | --- |
| 2500 万次 API 调用 | 4tb | $14,902 |
| 1 亿次 API 调用 | 12tb | $44,706 |
| 10 亿次 API 调用 | 120 太字节 | $418,308 |

### 可视化成本

可视化和报告的大部分成本是商业智能工具(如 Tableau 或 Looker)的许可费。

截至 2020 年 2 月，每个 Tableau Creator 席位每月费用为 70 美元，按年计费。

| 用户数量 | 可视化工具年费 |
| --- | --- |
| 10 名团队成员 | $8,400 |
| 50 名团队成员 | $42,000 |
| 150 名团队成员 | $126,000 |

### 维修费用

对于分析服务等复杂系统，持续的年度维护通常占初始构建时间的 25%，但也可能更高。这种维护包括错误修复(包括关键的安全修复)、来自各种业务单位的功能请求、升级过时的软件、随着 API 流量增加的性能优化以及修复数据质量问题。

支持不包括在内，但这一点应该考虑在内，尤其是如果业务用户将在公司范围内使用分析系统。

| 月成交量 | 需要团队 | 人日 | 年度维护成本 |
| --- | --- | --- | --- |
| 2500 万次 API 调用 | 6 个人 | 16 天 | $37,980 |
| 1 亿次 API 调用 | 13 个人 | 32 天 | $164,582 |
| 10 亿次 API 调用 | 19 人 | 41 天 | $308,196 |

## 总成本

第一年的总成本包括构建数据基础架构的成本、构建与现有工具连接的必要集成的成本、计算和存储成本，以及可视化工具的任何年度许可费用。

## 第一年成本

| 月成交量 | 用户数量 | 基础设施的建造成本 | 构建可视化和集成的成本 | 计算和存储成本 | 可视化工具费用 | 第一年总成本 |
| --- | --- | --- | --- | --- | --- | --- |
| 2500 万次 API 调用 | 10 名团队成员 | $154,296 | $21,758 | $14,902 | $8,400 | $199,356 |
| 1 亿次 API 调用 | 50 名团队成员 | $668,616 | $51,431 | $44,706 | $42,000 | $806,753 |
| 10 亿次 API 调用 | 150 名团队成员 | $1,240,302 | $134,513 | $418,308 | $126,000 | $1,919,123 |

## 持续年度成本

持续的年度成本包括维护内部系统的维护成本，包括错误修复和安全修复，以及计算、存储和可视化工具的年费。

| 月成交量 | 用户数量 | 年度维护成本 | 计算和存储成本 | 可视化工具费用 | 持续年度总成本 |
| --- | --- | --- | --- | --- | --- |
| 2500 万次 API 调用 | 10 名团队成员 | $37,980 | $14,902 | $8,400 | $61,282 |
| 1 亿次 API 调用 | 50 名团队成员 | $164,582 | $44,706 | $42,000 | $251,288 |
| 10 亿次 API 调用 | 150 名团队成员 | $308,196 | $418,308 | $126,000 | $852,504 |

## 为什么购买 Moesif？

购买 Moesif 而不是自行构建的公司可以在初始设置和持续年度成本方面实现 5 到 10 倍的成本节约。作为一流的 API 分析服务，Moesif 不断增加高级功能，如转换漏斗和保留分析，并利用机器学习来帮助团队快速做出正确的决策，而不会陷入指标和报告中。

通过收购 Moesif，工程团队有了额外的带宽来专注于他们最擅长的事情:构建客户喜爱的伟大产品，而不是埋头支持传统的本土分析系统。

Moesif 的客户也获得了我们在开发 API 平台方面的专业知识。企业客户可以联系我们的 API 专家，帮助您的内部团队定义他们的成功标准，同时在他们对如何最好地使用平台有疑问时为他们提供支持。